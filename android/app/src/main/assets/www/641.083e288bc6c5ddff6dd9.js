"use strict";(self.webpackChunksosgame=self.webpackChunksosgame||[]).push([[641],{641:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var n=r(373);function i(e,t,r,i){return new Promise((s=>{const o=n.A.presenterFuncDefault(r),l=i(e,t,r,o);l.on("gameover",(()=>{t.querySelector(".butInstall").classList.remove("hidden2")})),s(l)}))}},373:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(189),i=r(746);function s(e,t,r,n,i){let s=r,o="";return i>=0&&i<n.length&&(o=n[i]),{isLastMove:e,isActive:t,text:s,color:o}}function o(e){return{clientUserIdx:e.colorOrder.indexOf(e.color),currentUserIdx:0,playersSize:e.playerLimit,activeCellIndex:-1,activeDigitIndex:-1,lastMove:-1,gameover:!0,gamestarted:!1,round:0,fieldArr:n.A.init(e.size),movesIdx:Array(e.size).fill(-1)}}function l({currentUserIdx:e,clientUserIdx:t,playersSize:r,activeCellIndex:o,activeDigitIndex:l,lastMove:c,gameover:a,gamestarted:d,round:u,fieldArr:I,movesIdx:f},v){let A=n.A.field(I);const g=(0,i.A)(["firstmove","gameover"]);const x=()=>{e=(e+1)%r},M=function(r,i,s){if(!((e,t,r,n)=>!(t<0||t>=2)&&r==n&&A.canSet(e))(r,i,s,e))return{res:n.A.IMPOSSIBLE_MOVE,position:-1,digit:-1,playerId:e,clientId:s};const u=A.setSafeByIndex(i,r);if(u===n.A.IMPOSSIBLE_MOVE)return{res:u,position:-1,digit:-1,playerId:e,clientId:s};o=-1,l=-1,d||g.call("firstmove",{}),d=!0,f[r]=s,c=r;const I=e,v=t;return u===n.A.NORMAL_MOVE&&x(),u!==n.A.WINNING_MOVE&&u!==n.A.DRAW_MOVE||(a=!0,g.call("gameover",u)),{res:u,position:r,digit:i,playerId:I,clientId:v}},m=A.size,p=()=>v.colorOrder[e],y=()=>{d=!1,a=!1,o=-1,l=-1,c=-1,I=n.A.init(m()),f=Array(m()).fill(-1),e=u%r,A=n.A.field(I)};return{on:function(e,t){return g.on(e,t)},size:m,tryMove:function(){return M(o,l,e)},setMove:M,enum1:()=>function*(){for(let e=0;e<A.size();++e)yield[e,s(c===e,o===e,A.getCharSafe(e),v.colorOrder,f[e])]}(),setActivePosition:function(r){t!==e||a||(o=A.canSet(r)?r:-1)},setActiveDigitIndex:function(r){t!==e||a||(l=r)},currentColor:p,getActiveDigitIndex:()=>l,endMessage:r=>r===n.A.DRAW_MOVE?"Draw":e!==t?"You lose":"You win",endMessage2:e=>e===n.A.DRAW_MOVE?"Draw":p()+" player win",toJson:t=>({currentUserIdx:e,clientUserIdx:t,playersSize:r,activeCellIndex:o,activeDigitIndex:l,lastMove:c,gameover:a,fieldArr:A.toArr(),movesIdx:f}),isGameOver:()=>a,isMyMove:()=>!a&&e===t,calcLastMoveRes:()=>{if(c<0)return n.A.IMPOSSIBLE_MOVE;return A.checkWinning(c)},getCurrentIndex:()=>e,setClientIndex:e=>{t=e},getClientIndex:()=>t,getPlayersSize:()=>r,setMyTurn:()=>{e=t},nextRound:()=>{++u,y()},resetRound:y}}const c={presenterFunc:l,defaultPresenter:o,presenterFuncDefault:function(e){return l(o(e),e)}}}}]);