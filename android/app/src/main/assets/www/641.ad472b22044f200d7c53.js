"use strict";(self.webpackChunksosgame=self.webpackChunksosgame||[]).push([[641],{641:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var n=r(373);function i(e,t,r,i){return new Promise((o=>{const s=n.A.presenterFuncDefault(r),l=i(e,t,r,s);l.on("gameover",(()=>{t.querySelector(".butInstall").classList.remove("hidden2")})),o(l)}))}},373:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(189),i=r(746);function o(e,t,r,n,i){let o=r,s="";return i>=0&&i<n.length&&(s=n[i]),{isLastMove:e,isActive:t,text:o,color:s}}function s(e){return{clientUserIdx:e.colorOrder.indexOf(e.color),currentUserIdx:0,playersSize:e.playerLimit,activeCellIndex:-1,activeDigitIndex:-1,lastMove:-1,gameover:!0,gamestarted:!1,round:0,fieldArr:n.A.init(e.size),movesIdx:Array.from({length:e.size}).fill(-1)}}function l({currentUserIdx:e,clientUserIdx:t,playersSize:r,activeCellIndex:s,activeDigitIndex:l,lastMove:c,gameover:a,gamestarted:d,round:u,fieldArr:I,movesIdx:f},v){let g=n.A.field(I);const A=(0,i.A)(["firstmove","gameover"]);const x=()=>{e=(e+1)%r},M=function(r,i,o){if(!((e,t,r,n)=>!(t<0||t>=2)&&r===n&&g.canSet(e))(r,i,o,e))return{res:n.A.IMPOSSIBLE_MOVE,position:-1,digit:-1,playerId:e,clientId:o};const u=g.setSafeByIndex(i,r);if(u===n.A.IMPOSSIBLE_MOVE)return{res:u,position:-1,digit:-1,playerId:e,clientId:o};s=-1,l=-1,d||A.call("firstmove",{}),d=!0,f[r]=o,c=r;const I=e,v=t;return u===n.A.NORMAL_MOVE&&x(),u!==n.A.WINNING_MOVE&&u!==n.A.DRAW_MOVE||(a=!0,A.call("gameover",u)),{res:u,position:r,digit:i,playerId:I,clientId:v}},m=g.size,p=()=>v.colorOrder[e],y=()=>{d=!1,a=!1,s=-1,l=-1,c=-1,I=n.A.init(m()),f=Array.from({length:m()}).fill(-1),e=u%r,g=n.A.field(I)};return{on:function(e,t){return A.on(e,t)},size:m,tryMove:function(){return M(s,l,e)},setMove:M,enum1:()=>function*(){for(let e=0;e<g.size();++e)yield[e,o(c===e,s===e,g.getCharSafe(e),v.colorOrder,f[e])]}(),setActivePosition:function(r){t!==e||a||(s=g.canSet(r)?r:-1)},setActiveDigitIndex:function(r){t!==e||a||(l=r)},currentColor:p,getActiveDigitIndex:()=>l,endMessage:r=>r===n.A.DRAW_MOVE?"Draw":e!==t?"You lose":"You win",endMessage2:e=>e===n.A.DRAW_MOVE?"Draw":p()+" player win",toJson:t=>({currentUserIdx:e,clientUserIdx:t,playersSize:r,activeCellIndex:s,activeDigitIndex:l,lastMove:c,gameover:a,fieldArr:g.toArr(),movesIdx:f}),isGameOver:()=>a,isMyMove:()=>!a&&e===t,calcLastMoveRes:()=>{if(c<0)return n.A.IMPOSSIBLE_MOVE;return g.checkWinning(c)},getCurrentIndex:()=>e,setClientIndex:e=>{t=e},getClientIndex:()=>t,getPlayersSize:()=>r,setMyTurn:()=>{e=t},nextRound:()=>{++u,y()},resetRound:y}}const c={presenterFunc:l,defaultPresenter:s,presenterFuncDefault:function(e){return l(s(e),e)}}}}]);