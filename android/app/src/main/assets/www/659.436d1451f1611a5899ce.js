"use strict";(self.webpackChunksosgame=self.webpackChunksosgame||[]).push([[659],{659:(e,r,t)=>{t.r(r),t.d(r,{default:()=>i});var n=t(373);function i(e,r,t,i){return new Promise((o=>{const s=n.A.presenterFuncDefault(t);o(i(e,r,t,s))}))}},373:(e,r,t)=>{t.d(r,{A:()=>l});var n=t(189),i=t(746);function o(e,r,t,n,i){let o=t,s="";return i>=0&&i<n.length&&(s=n[i]),{isLastMove:e,isActive:r,text:o,color:s}}function s(e){return{clientUserIdx:e.colorOrder.indexOf(e.color),currentUserIdx:e.colorOrder.indexOf(e.color),playersSize:e.colorOrder.length,activeCellIndex:-1,activeDigitIndex:-1,lastMove:-1,gameover:!1,gamestarted:!1,round:0,fieldArr:n.A.init(e.size),movesIdx:Array(e.size).fill(-1)}}function c({currentUserIdx:e,clientUserIdx:r,playersSize:t,activeCellIndex:s,activeDigitIndex:c,lastMove:l,gameover:a,gamestarted:d,round:u,fieldArr:f,movesIdx:I},v){let A=n.A.field(f);const g=(0,i.A)(["firstmove","gameover"]);const M=function(i,o,u){if(!((e,r,t,n)=>!(r<0||r>=2)&&t==n&&A.canSet(e))(i,o,u,e))return{res:n.A.IMPOSSIBLE_MOVE,position:-1,digit:-1,playerId:e,clientId:u};const f=A.setSafeByIndex(o,i);if(f===n.A.IMPOSSIBLE_MOVE)return{res:f,position:-1,digit:-1,playerId:e,clientId:u};s=-1,c=-1,d||g.call("firstmove",{}),d=!0,I[i]=u,l=i;const M=e,x=r;return f===n.A.NORMAL_MOVE&&(e=(e+1)%t,"hotseat"===v.mode&&(r=e)),f!==n.A.WINNING_MOVE&&f!==n.A.DRAW_MOVE||(a=!0,g.call("gameover",f)),{res:f,position:i,digit:o,playerId:M,clientId:x}},x=A.size,O=()=>v.colorOrder[e];return{on:function(e,r){return g.on(e,r)},size:x,tryMove:function(){return M(s,c,e)},setMove:M,enum1:()=>function*(){for(let e=0;e<A.size();++e)yield[e,o(l===e,s===e,A.getCharSafe(e),v.colorOrder,I[e])]}(),setActivePosition:function(t){r!==e||a||(s=A.canSet(t)?t:-1)},setActiveDigitIndex:function(t){r!==e||a||(c=t)},currentColor:O,getActiveDigitIndex:()=>c,endMessage:t=>t===n.A.DRAW_MOVE?"Draw":e!==r?"You lose":"You win",endMessage2:e=>e===n.A.DRAW_MOVE?"Draw":O()+" player win",toJson:r=>({currentUserIdx:e,clientUserIdx:r,playersSize:t,activeCellIndex:s,activeDigitIndex:c,lastMove:l,gameover:a,fieldArr:A.toArr(),movesIdx:I}),isGameOver:()=>a,isMyMove:()=>!a&&e===r,calcLastMoveRes:()=>{if(l<0)return n.A.IMPOSSIBLE_MOVE;return A.checkWinning(l)},nextRound:()=>{++u,d=!1,a=!1,s=-1,c=-1,l=-1,a=!1,d=!1,f=n.A.init(v.size),I=Array(v.size).fill(-1),e=(r+u)%t,A=n.A.field(f)}}}const l={presenterFunc:c,defaultPresenter:s,presenterFuncDefault:function(e){return c(s(e),e)}}}}]);